interactions:
- request:
    body: bank_account[country]=DE&bank_account[currency]=EUR&bank_account[account_number]=DE89370400440532013000&bank_account[account_holder_name]=Jane+Doe
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/tokens
  response:
    body:
      string: "{\n  \"id\": \"btok_1FqJeFFk4eGpfLOCGhwgQwQS\",\n  \"object\": \"token\",\n
        \ \"bank_account\": {\n    \"id\": \"ba_1FqJeFFk4eGpfLOCYFYMfDdS\",\n    \"object\":
        \"bank_account\",\n    \"account_holder_name\": \"Jane Doe\",\n    \"account_holder_type\":
        null,\n    \"bank_name\": \"STRIPE TEST BANK\",\n    \"country\": \"DE\",\n
        \   \"currency\": \"eur\",\n    \"fingerprint\": \"vYeSfyBOnTdv1v6W\",\n    \"last4\":
        \"3000\",\n    \"routing_number\": \"110000000\",\n    \"status\": \"new\"\n
        \ },\n  \"client_ip\": \"45.152.181.148\",\n  \"created\": 1576503007,\n  \"livemode\":
        false,\n  \"type\": \"bank_account\",\n  \"used\": false\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '551'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:07 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - a85af3a1-c482-4ad6-a897-17a3717b5c22
      original-request:
      - req_9hqNxxtvuw1N7B
      request-id:
      - req_9hqNxxtvuw1N7B
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: account[tos_shown_and_accepted]=True
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/tokens
  response:
    body:
      string: "{\n  \"id\": \"ct_1FqJeGFk4eGpfLOCSiNt4NN3\",\n  \"object\": \"token\",\n
        \ \"client_ip\": \"45.152.181.148\",\n  \"created\": 1576503008,\n  \"livemode\":
        false,\n  \"type\": \"account\",\n  \"used\": false\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '180'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:08 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - 861ef7b2-afea-4a4e-885c-83097bf2dce6
      original-request:
      - req_TazVFb5RfoAdgT
      request-id:
      - req_TazVFb5RfoAdgT
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: account_token=ct_1FqJeGFk4eGpfLOCSiNt4NN3&country=CH&type=custom
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/accounts
  response:
    body:
      string: "{\n  \"id\": \"acct_1FqJeGGxJKe3V2vT\",\n  \"object\": \"account\",\n
        \ \"business_profile\": {\n    \"mcc\": null,\n    \"name\": null,\n    \"product_description\":
        null,\n    \"support_address\": null,\n    \"support_email\": null,\n    \"support_phone\":
        null,\n    \"support_url\": null,\n    \"url\": null\n  },\n  \"business_type\":
        null,\n  \"capabilities\": {\n    \"legacy_payments\": \"active\"\n  },\n
        \ \"charges_enabled\": true,\n  \"country\": \"CH\",\n  \"created\": 1576503008,\n
        \ \"default_currency\": \"chf\",\n  \"details_submitted\": false,\n  \"email\":
        null,\n  \"external_accounts\": {\n    \"object\": \"list\",\n    \"data\":
        [\n\n    ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\":
        \"/v1/accounts/acct_1FqJeGGxJKe3V2vT/external_accounts\"\n  },\n  \"metadata\":
        {\n  },\n  \"payouts_enabled\": false,\n  \"requirements\": {\n    \"current_deadline\":
        null,\n    \"currently_due\": [\n      \"external_account\"\n    ],\n    \"disabled_reason\":
        null,\n    \"eventually_due\": [\n      \"business_type\",\n      \"external_account\",\n
        \     \"relationship.account_opener\"\n    ],\n    \"past_due\": [\n      \"external_account\"\n
        \   ],\n    \"pending_verification\": [\n\n    ]\n  },\n  \"settings\": {\n
        \   \"branding\": {\n      \"icon\": null,\n      \"logo\": null,\n      \"primary_color\":
        null\n    },\n    \"card_payments\": {\n      \"decline_on\": {\n        \"avs_failure\":
        false,\n        \"cvc_failure\": false\n      },\n      \"statement_descriptor_prefix\":
        null\n    },\n    \"dashboard\": {\n      \"display_name\": null,\n      \"timezone\":
        \"Etc/UTC\"\n    },\n    \"payments\": {\n      \"statement_descriptor\":
        \"\",\n      \"statement_descriptor_kana\": null,\n      \"statement_descriptor_kanji\":
        null\n    },\n    \"payouts\": {\n      \"debit_negative_balances\": false,\n
        \     \"schedule\": {\n        \"delay_days\": 7,\n        \"interval\": \"daily\"\n
        \     },\n      \"statement_descriptor\": null\n    }\n  },\n  \"tos_acceptance\":
        {\n    \"date\": 1576503008,\n    \"ip\": \"45.152.181.148\",\n    \"user_agent\":
        \"Stripe/v1 PythonBindings/2.35.1\"\n  },\n  \"type\": \"custom\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1915'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:09 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - d4b08814-f4a8-4c65-a6a9-b660281dc0a1
      original-request:
      - req_6Qmjm4Uxipc83p
      request-id:
      - req_6Qmjm4Uxipc83p
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/tokens/tok_visa
  response:
    body:
      string: "{\n  \"id\": \"tok_1FqJeHFk4eGpfLOCZf1VW1bG\",\n  \"object\": \"token\",\n
        \ \"card\": {\n    \"id\": \"card_1FqJeHFk4eGpfLOCi0RWci5I\",\n    \"object\":
        \"card\",\n    \"address_city\": null,\n    \"address_country\": null,\n    \"address_line1\":
        null,\n    \"address_line1_check\": null,\n    \"address_line2\": null,\n
        \   \"address_state\": null,\n    \"address_zip\": null,\n    \"address_zip_check\":
        null,\n    \"brand\": \"Visa\",\n    \"country\": \"US\",\n    \"currency\":
        \"usd\",\n    \"cvc_check\": null,\n    \"dynamic_last4\": null,\n    \"exp_month\":
        12,\n    \"exp_year\": 2020,\n    \"fingerprint\": \"k6ycurEAdsI1uF3b\",\n
        \   \"funding\": \"credit\",\n    \"last4\": \"4242\",\n    \"metadata\":
        {\n    },\n    \"name\": null,\n    \"tokenization_method\": null\n  },\n
        \ \"client_ip\": null,\n  \"created\": 1576503009,\n  \"livemode\": false,\n
        \ \"type\": \"card\",\n  \"used\": false\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '791'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:09 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_EPYOaxBwkIFwrH
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: owner[email]=donor%40example.com&redirect[return_url]=http%3A%2F%2Flocalhost%2Fdonor%2Fgiving%2Fpay%2Fstripe%2Fcomplete&token=tok_1FqJeHFk4eGpfLOCZf1VW1bG&type=card&usage=reusable
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/sources
  response:
    body:
      string: "{\n  \"id\": \"src_1FqJeHFk4eGpfLOCAJZXUxmT\",\n  \"object\": \"source\",\n
        \ \"amount\": null,\n  \"card\": {\n    \"exp_month\": 12,\n    \"exp_year\":
        2020,\n    \"last4\": \"4242\",\n    \"country\": \"US\",\n    \"brand\":
        \"Visa\",\n    \"funding\": \"credit\",\n    \"fingerprint\": \"k6ycurEAdsI1uF3b\",\n
        \   \"three_d_secure\": \"optional\",\n    \"name\": null,\n    \"address_line1_check\":
        null,\n    \"address_zip_check\": null,\n    \"cvc_check\": null,\n    \"tokenization_method\":
        null,\n    \"dynamic_last4\": null\n  },\n  \"client_secret\": \"src_client_secret_GN3lanBDHQehv4JqivibsE71\",\n
        \ \"created\": 1576503009,\n  \"currency\": null,\n  \"flow\": \"none\",\n
        \ \"livemode\": false,\n  \"metadata\": {\n  },\n  \"owner\": {\n    \"address\":
        null,\n    \"email\": \"donor@example.com\",\n    \"name\": null,\n    \"phone\":
        null,\n    \"verified_address\": null,\n    \"verified_email\": null,\n    \"verified_name\":
        null,\n    \"verified_phone\": null\n  },\n  \"statement_descriptor\": null,\n
        \ \"status\": \"chargeable\",\n  \"type\": \"card\",\n  \"usage\": \"reusable\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '959'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:10 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - create_source_from_tok_1FqJeHFk4eGpfLOCZf1VW1bG
      original-request:
      - req_vdtFbcj516II7P
      request-id:
      - req_vdtFbcj516II7P
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: email=donor%40example.com&source=src_1FqJeHFk4eGpfLOCAJZXUxmT
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/customers
  response:
    body:
      string: "{\n  \"id\": \"cus_GN3lx9mIZCMdAl\",\n  \"object\": \"customer\",\n
        \ \"account_balance\": 0,\n  \"address\": null,\n  \"balance\": 0,\n  \"created\":
        1576503010,\n  \"currency\": null,\n  \"default_source\": \"src_1FqJeHFk4eGpfLOCAJZXUxmT\",\n
        \ \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n
        \ \"email\": \"donor@example.com\",\n  \"invoice_prefix\": \"15A658AD\",\n
        \ \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\":
        null,\n    \"footer\": null\n  },\n  \"livemode\": false,\n  \"metadata\":
        {\n  },\n  \"name\": null,\n  \"phone\": null,\n  \"preferred_locales\": [\n\n
        \ ],\n  \"shipping\": null,\n  \"sources\": {\n    \"object\": \"list\",\n
        \   \"data\": [\n      {\n        \"id\": \"src_1FqJeHFk4eGpfLOCAJZXUxmT\",\n
        \       \"object\": \"source\",\n        \"amount\": null,\n        \"card\":
        {\n          \"exp_month\": 12,\n          \"exp_year\": 2020,\n          \"last4\":
        \"4242\",\n          \"country\": \"US\",\n          \"brand\": \"Visa\",\n
        \         \"funding\": \"credit\",\n          \"fingerprint\": \"k6ycurEAdsI1uF3b\",\n
        \         \"three_d_secure\": \"optional\",\n          \"name\": null,\n          \"address_line1_check\":
        null,\n          \"address_zip_check\": null,\n          \"cvc_check\": null,\n
        \         \"tokenization_method\": null,\n          \"dynamic_last4\": null\n
        \       },\n        \"client_secret\": \"src_client_secret_GN3lanBDHQehv4JqivibsE71\",\n
        \       \"created\": 1576503009,\n        \"currency\": null,\n        \"customer\":
        \"cus_GN3lx9mIZCMdAl\",\n        \"flow\": \"none\",\n        \"livemode\":
        false,\n        \"metadata\": {\n        },\n        \"owner\": {\n          \"address\":
        null,\n          \"email\": \"donor@example.com\",\n          \"name\": null,\n
        \         \"phone\": null,\n          \"verified_address\": null,\n          \"verified_email\":
        null,\n          \"verified_name\": null,\n          \"verified_phone\": null\n
        \       },\n        \"statement_descriptor\": null,\n        \"status\": \"chargeable\",\n
        \       \"type\": \"card\",\n        \"usage\": \"reusable\"\n      }\n    ],\n
        \   \"has_more\": false,\n    \"total_count\": 1,\n    \"url\": \"/v1/customers/cus_GN3lx9mIZCMdAl/sources\"\n
        \ },\n  \"subscriptions\": {\n    \"object\": \"list\",\n    \"data\": [\n\n
        \   ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\": \"/v1/customers/cus_GN3lx9mIZCMdAl/subscriptions\"\n
        \ },\n  \"tax_exempt\": \"none\",\n  \"tax_ids\": {\n    \"object\": \"list\",\n
        \   \"data\": [\n\n    ],\n    \"has_more\": false,\n    \"total_count\":
        0,\n    \"url\": \"/v1/customers/cus_GN3lx9mIZCMdAl/tax_ids\"\n  },\n  \"tax_info\":
        null,\n  \"tax_info_verification\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '2410'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:10 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - create_customer_for_participant_1310
      original-request:
      - req_ELkv7KwZhOw5p3
      request-id:
      - req_ELkv7KwZhOw5p3
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: amount=2499&currency=eur&customer=cus_GN3lx9mIZCMdAl&metadata[payin_id]=1310&source=src_1FqJeHFk4eGpfLOCAJZXUxmT&statement_descriptor=Liberapay+1310&expand[0]=balance_transaction
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/charges
  response:
    body:
      string: "{\n  \"id\": \"ch_1FqJeIFk4eGpfLOClBbEnS0y\",\n  \"object\": \"charge\",\n
        \ \"amount\": 2499,\n  \"amount_refunded\": 0,\n  \"application\": null,\n
        \ \"application_fee\": null,\n  \"application_fee_amount\": null,\n  \"balance_transaction\":
        {\n    \"id\": \"txn_1FqJeJFk4eGpfLOCRABy7oiW\",\n    \"object\": \"balance_transaction\",\n
        \   \"amount\": 2499,\n    \"available_on\": 1577059200,\n    \"created\":
        1576503010,\n    \"currency\": \"eur\",\n    \"description\": null,\n    \"exchange_rate\":
        null,\n    \"fee\": 97,\n    \"fee_details\": [\n      {\n        \"amount\":
        97,\n        \"application\": null,\n        \"currency\": \"eur\",\n        \"description\":
        \"Stripe processing fees\",\n        \"type\": \"stripe_fee\"\n      }\n    ],\n
        \   \"net\": 2402,\n    \"source\": \"ch_1FqJeIFk4eGpfLOClBbEnS0y\",\n    \"status\":
        \"pending\",\n    \"type\": \"charge\"\n  },\n  \"billing_details\": {\n    \"address\":
        {\n      \"city\": null,\n      \"country\": null,\n      \"line1\": null,\n
        \     \"line2\": null,\n      \"postal_code\": null,\n      \"state\": null\n
        \   },\n    \"email\": \"donor@example.com\",\n    \"name\": null,\n    \"phone\":
        null\n  },\n  \"captured\": true,\n  \"created\": 1576503010,\n  \"currency\":
        \"eur\",\n  \"customer\": \"cus_GN3lx9mIZCMdAl\",\n  \"description\": null,\n
        \ \"destination\": null,\n  \"dispute\": null,\n  \"disputed\": false,\n  \"failure_code\":
        null,\n  \"failure_message\": null,\n  \"fraud_details\": {\n  },\n  \"invoice\":
        null,\n  \"livemode\": false,\n  \"metadata\": {\n    \"payin_id\": \"1310\"\n
        \ },\n  \"on_behalf_of\": null,\n  \"order\": null,\n  \"outcome\": {\n    \"network_status\":
        \"approved_by_network\",\n    \"reason\": null,\n    \"risk_level\": \"normal\",\n
        \   \"risk_score\": 34,\n    \"seller_message\": \"Payment complete.\",\n
        \   \"type\": \"authorized\"\n  },\n  \"paid\": true,\n  \"payment_intent\":
        null,\n  \"payment_method\": \"src_1FqJeHFk4eGpfLOCAJZXUxmT\",\n  \"payment_method_details\":
        {\n    \"card\": {\n      \"brand\": \"visa\",\n      \"checks\": {\n        \"address_line1_check\":
        null,\n        \"address_postal_code_check\": null,\n        \"cvc_check\":
        null\n      },\n      \"country\": \"US\",\n      \"exp_month\": 12,\n      \"exp_year\":
        2020,\n      \"fingerprint\": \"k6ycurEAdsI1uF3b\",\n      \"funding\": \"credit\",\n
        \     \"installments\": null,\n      \"last4\": \"4242\",\n      \"network\":
        \"visa\",\n      \"three_d_secure\": null,\n      \"wallet\": null\n    },\n
        \   \"type\": \"card\"\n  },\n  \"receipt_email\": null,\n  \"receipt_number\":
        null,\n  \"receipt_url\": \"https://pay.stripe.com/receipts/acct_1ChyayFk4eGpfLOC/ch_1FqJeIFk4eGpfLOClBbEnS0y/rcpt_GN3ldV583aaj16X9IfL2snzncBPm9hQ\",\n
        \ \"refunded\": false,\n  \"refunds\": {\n    \"object\": \"list\",\n    \"data\":
        [\n\n    ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\":
        \"/v1/charges/ch_1FqJeIFk4eGpfLOClBbEnS0y/refunds\"\n  },\n  \"review\": null,\n
        \ \"shipping\": null,\n  \"source\": {\n    \"id\": \"src_1FqJeHFk4eGpfLOCAJZXUxmT\",\n
        \   \"object\": \"source\",\n    \"amount\": null,\n    \"card\": {\n      \"exp_month\":
        12,\n      \"exp_year\": 2020,\n      \"last4\": \"4242\",\n      \"country\":
        \"US\",\n      \"brand\": \"Visa\",\n      \"funding\": \"credit\",\n      \"fingerprint\":
        \"k6ycurEAdsI1uF3b\",\n      \"three_d_secure\": \"optional\",\n      \"name\":
        null,\n      \"address_line1_check\": null,\n      \"address_zip_check\":
        null,\n      \"cvc_check\": null,\n      \"tokenization_method\": null,\n
        \     \"dynamic_last4\": null\n    },\n    \"client_secret\": \"src_client_secret_GN3lanBDHQehv4JqivibsE71\",\n
        \   \"created\": 1576503011,\n    \"currency\": null,\n    \"customer\": \"cus_GN3lx9mIZCMdAl\",\n
        \   \"flow\": \"none\",\n    \"livemode\": false,\n    \"metadata\": {\n    },\n
        \   \"owner\": {\n      \"address\": null,\n      \"email\": \"donor@example.com\",\n
        \     \"name\": null,\n      \"phone\": null,\n      \"verified_address\":
        null,\n      \"verified_email\": null,\n      \"verified_name\": null,\n      \"verified_phone\":
        null\n    },\n    \"statement_descriptor\": null,\n    \"status\": \"chargeable\",\n
        \   \"type\": \"card\",\n    \"usage\": \"reusable\"\n  },\n  \"source_transfer\":
        null,\n  \"statement_descriptor\": \"Liberapay 1310\",\n  \"statement_descriptor_suffix\":
        \"Liberapay 1310\",\n  \"status\": \"succeeded\",\n  \"transfer_data\": null,\n
        \ \"transfer_group\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '3924'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:11 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - payin_1310
      original-request:
      - req_reIGPQM2D3PyQZ
      request-id:
      - req_reIGPQM2D3PyQZ
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/sources/src_1FqJeHFk4eGpfLOCAJZXUxmT
  response:
    body:
      string: "{\n  \"id\": \"src_1FqJeHFk4eGpfLOCAJZXUxmT\",\n  \"object\": \"source\",\n
        \ \"amount\": null,\n  \"card\": {\n    \"exp_month\": 12,\n    \"exp_year\":
        2020,\n    \"last4\": \"4242\",\n    \"country\": \"US\",\n    \"brand\":
        \"Visa\",\n    \"funding\": \"credit\",\n    \"fingerprint\": \"k6ycurEAdsI1uF3b\",\n
        \   \"three_d_secure\": \"optional\",\n    \"name\": null,\n    \"address_line1_check\":
        null,\n    \"address_zip_check\": null,\n    \"cvc_check\": null,\n    \"tokenization_method\":
        null,\n    \"dynamic_last4\": null\n  },\n  \"client_secret\": \"src_client_secret_GN3lanBDHQehv4JqivibsE71\",\n
        \ \"created\": 1576503009,\n  \"currency\": null,\n  \"customer\": \"cus_GN3lx9mIZCMdAl\",\n
        \ \"flow\": \"none\",\n  \"livemode\": false,\n  \"metadata\": {\n  },\n  \"owner\":
        {\n    \"address\": null,\n    \"email\": \"donor@example.com\",\n    \"name\":
        null,\n    \"phone\": null,\n    \"verified_address\": null,\n    \"verified_email\":
        null,\n    \"verified_name\": null,\n    \"verified_phone\": null\n  },\n
        \ \"statement_descriptor\": null,\n  \"status\": \"chargeable\",\n  \"type\":
        \"card\",\n  \"usage\": \"reusable\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '995'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:11 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_QzAaQODAEKVLJC
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/tokens/btok_1FqJeFFk4eGpfLOCGhwgQwQS
  response:
    body:
      string: "{\n  \"id\": \"btok_1FqJeFFk4eGpfLOCGhwgQwQS\",\n  \"object\": \"token\",\n
        \ \"bank_account\": {\n    \"id\": \"ba_1FqJeFFk4eGpfLOCYFYMfDdS\",\n    \"object\":
        \"bank_account\",\n    \"account_holder_name\": \"Jane Doe\",\n    \"account_holder_type\":
        null,\n    \"bank_name\": \"STRIPE TEST BANK\",\n    \"country\": \"DE\",\n
        \   \"currency\": \"eur\",\n    \"fingerprint\": \"vYeSfyBOnTdv1v6W\",\n    \"last4\":
        \"3000\",\n    \"routing_number\": \"110000000\",\n    \"status\": \"new\"\n
        \ },\n  \"client_ip\": \"45.152.181.148\",\n  \"created\": 1576503007,\n  \"livemode\":
        false,\n  \"type\": \"bank_account\",\n  \"used\": false\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '551'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:12 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_4dUBBeL6lR5Bp9
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: amount=5200&owner[email]=donor%40example.com&redirect[return_url]=http%3A%2F%2Flocalhost%2Fdonor%2Fgiving%2Fpay%2Fstripe%2Fcomplete&token=btok_1FqJeFFk4eGpfLOCGhwgQwQS&type=sepa_debit&usage=reusable
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/sources
  response:
    body:
      string: "{\n  \"id\": \"src_1FqJeKFk4eGpfLOChUFsMrh9\",\n  \"object\": \"source\",\n
        \ \"amount\": 5200,\n  \"client_secret\": \"src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\",\n
        \ \"created\": 1576503012,\n  \"currency\": \"eur\",\n  \"flow\": \"none\",\n
        \ \"livemode\": false,\n  \"mandate\": {\n    \"acceptance\": {\n      \"date\":
        null,\n      \"ip\": null,\n      \"offline\": null,\n      \"online\": null,\n
        \     \"status\": \"pending\",\n      \"type\": null,\n      \"user_agent\":
        null\n    },\n    \"amount\": null,\n    \"currency\": null,\n    \"interval\":
        \"variable\",\n    \"notification_method\": \"none\",\n    \"reference\":
        \"FINXAZJNJCHUUHHQ\",\n    \"url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeKFk4eGpfLOChUFsMrh9/src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\"\n
        \ },\n  \"metadata\": {\n  },\n  \"owner\": {\n    \"address\": {\n      \"city\":
        null,\n      \"country\": \"DE\",\n      \"line1\": null,\n      \"line2\":
        null,\n      \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\":
        \"donor@example.com\",\n    \"name\": \"Jane Doe\",\n    \"phone\": null,\n
        \   \"verified_address\": null,\n    \"verified_email\": null,\n    \"verified_name\":
        null,\n    \"verified_phone\": null\n  },\n  \"sepa_debit\": {\n    \"last4\":
        \"3000\",\n    \"bank_code\": \"37040044\",\n    \"fingerprint\": \"VNz5BVW8XnYcq3XT\",\n
        \   \"country\": \"DE\",\n    \"mandate_reference\": \"FINXAZJNJCHUUHHQ\",\n
        \   \"mandate_url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeKFk4eGpfLOChUFsMrh9/src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\",\n
        \   \"branch_code\": null\n  },\n  \"statement_descriptor\": null,\n  \"status\":
        \"chargeable\",\n  \"type\": \"sepa_debit\",\n  \"usage\": \"reusable\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1545'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:12 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - create_source_from_btok_1FqJeFFk4eGpfLOCGhwgQwQS
      original-request:
      - req_Yd0PDZ0TzHebk4
      request-id:
      - req_Yd0PDZ0TzHebk4
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: email=donor%40example.com&source=src_1FqJeKFk4eGpfLOChUFsMrh9
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/customers
  response:
    body:
      string: "{\n  \"id\": \"cus_GN3letVcTd9fGe\",\n  \"object\": \"customer\",\n
        \ \"account_balance\": 0,\n  \"address\": null,\n  \"balance\": 0,\n  \"created\":
        1576503012,\n  \"currency\": null,\n  \"default_source\": \"src_1FqJeKFk4eGpfLOChUFsMrh9\",\n
        \ \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n
        \ \"email\": \"donor@example.com\",\n  \"invoice_prefix\": \"548E84BB\",\n
        \ \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\":
        null,\n    \"footer\": null\n  },\n  \"livemode\": false,\n  \"metadata\":
        {\n  },\n  \"name\": null,\n  \"phone\": null,\n  \"preferred_locales\": [\n\n
        \ ],\n  \"shipping\": null,\n  \"sources\": {\n    \"object\": \"list\",\n
        \   \"data\": [\n      {\n        \"id\": \"src_1FqJeKFk4eGpfLOChUFsMrh9\",\n
        \       \"object\": \"source\",\n        \"amount\": 5200,\n        \"client_secret\":
        \"src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\",\n        \"created\": 1576503012,\n
        \       \"currency\": \"eur\",\n        \"customer\": \"cus_GN3letVcTd9fGe\",\n
        \       \"flow\": \"none\",\n        \"livemode\": false,\n        \"mandate\":
        {\n          \"acceptance\": {\n            \"date\": null,\n            \"ip\":
        null,\n            \"offline\": null,\n            \"online\": null,\n            \"status\":
        \"pending\",\n            \"type\": null,\n            \"user_agent\": null\n
        \         },\n          \"amount\": null,\n          \"currency\": null,\n
        \         \"interval\": \"variable\",\n          \"notification_method\":
        \"none\",\n          \"reference\": \"FINXAZJNJCHUUHHQ\",\n          \"url\":
        \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeKFk4eGpfLOChUFsMrh9/src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\"\n
        \       },\n        \"metadata\": {\n        },\n        \"owner\": {\n          \"address\":
        {\n            \"city\": null,\n            \"country\": \"DE\",\n            \"line1\":
        null,\n            \"line2\": null,\n            \"postal_code\": null,\n
        \           \"state\": null\n          },\n          \"email\": \"donor@example.com\",\n
        \         \"name\": \"Jane Doe\",\n          \"phone\": null,\n          \"verified_address\":
        null,\n          \"verified_email\": null,\n          \"verified_name\": null,\n
        \         \"verified_phone\": null\n        },\n        \"sepa_debit\": {\n
        \         \"last4\": \"3000\",\n          \"bank_code\": \"37040044\",\n          \"fingerprint\":
        \"VNz5BVW8XnYcq3XT\",\n          \"country\": \"DE\",\n          \"mandate_reference\":
        \"FINXAZJNJCHUUHHQ\",\n          \"mandate_url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeKFk4eGpfLOChUFsMrh9/src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\",\n
        \         \"branch_code\": null\n        },\n        \"statement_descriptor\":
        null,\n        \"status\": \"chargeable\",\n        \"type\": \"sepa_debit\",\n
        \       \"usage\": \"reusable\"\n      }\n    ],\n    \"has_more\": false,\n
        \   \"total_count\": 1,\n    \"url\": \"/v1/customers/cus_GN3letVcTd9fGe/sources\"\n
        \ },\n  \"subscriptions\": {\n    \"object\": \"list\",\n    \"data\": [\n\n
        \   ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\": \"/v1/customers/cus_GN3letVcTd9fGe/subscriptions\"\n
        \ },\n  \"tax_exempt\": \"none\",\n  \"tax_ids\": {\n    \"object\": \"list\",\n
        \   \"data\": [\n\n    ],\n    \"has_more\": false,\n    \"total_count\":
        0,\n    \"url\": \"/v1/customers/cus_GN3letVcTd9fGe/tax_ids\"\n  },\n  \"tax_info\":
        null,\n  \"tax_info_verification\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '3098'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:13 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - create_customer_for_participant_1320
      original-request:
      - req_NDsEAVq87d4Azx
      request-id:
      - req_NDsEAVq87d4Azx
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: amount=5200&currency=eur&customer=cus_GN3letVcTd9fGe&metadata[payin_id]=1320&source=src_1FqJeKFk4eGpfLOChUFsMrh9&statement_descriptor=Liberapay+1320&expand[0]=balance_transaction
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/charges
  response:
    body:
      string: "{\n  \"id\": \"py_1FqJeLFk4eGpfLOC4iLmeKkl\",\n  \"object\": \"charge\",\n
        \ \"amount\": 5200,\n  \"amount_refunded\": 0,\n  \"application\": null,\n
        \ \"application_fee\": null,\n  \"application_fee_amount\": null,\n  \"balance_transaction\":
        null,\n  \"billing_details\": {\n    \"address\": {\n      \"city\": null,\n
        \     \"country\": \"DE\",\n      \"line1\": null,\n      \"line2\": null,\n
        \     \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\":
        \"donor@example.com\",\n    \"name\": \"Jane Doe\",\n    \"phone\": null\n
        \ },\n  \"captured\": true,\n  \"created\": 1576503013,\n  \"currency\": \"eur\",\n
        \ \"customer\": \"cus_GN3letVcTd9fGe\",\n  \"description\": null,\n  \"destination\":
        null,\n  \"dispute\": null,\n  \"disputed\": false,\n  \"failure_code\": null,\n
        \ \"failure_message\": null,\n  \"fraud_details\": {\n  },\n  \"invoice\":
        null,\n  \"livemode\": false,\n  \"metadata\": {\n    \"payin_id\": \"1320\"\n
        \ },\n  \"on_behalf_of\": null,\n  \"order\": null,\n  \"outcome\": {\n    \"network_status\":
        \"approved_by_network\",\n    \"reason\": null,\n    \"risk_level\": \"not_assessed\",\n
        \   \"seller_message\": \"Payment complete.\",\n    \"type\": \"authorized\"\n
        \ },\n  \"paid\": false,\n  \"payment_intent\": null,\n  \"payment_method\":
        \"src_1FqJeKFk4eGpfLOChUFsMrh9\",\n  \"payment_method_details\": {\n    \"sepa_debit\":
        {\n      \"bank_code\": \"37040044\",\n      \"branch_code\": null,\n      \"country\":
        \"DE\",\n      \"fingerprint\": \"VNz5BVW8XnYcq3XT\",\n      \"last4\": \"3000\",\n
        \     \"mandate\": null\n    },\n    \"type\": \"sepa_debit\"\n  },\n  \"receipt_email\":
        null,\n  \"receipt_number\": null,\n  \"receipt_url\": \"https://pay.stripe.com/receipts/acct_1ChyayFk4eGpfLOC/py_1FqJeLFk4eGpfLOC4iLmeKkl/rcpt_GN3lKpa5SwyPUtttE5GeYAvTiT3nnK4\",\n
        \ \"refunded\": false,\n  \"refunds\": {\n    \"object\": \"list\",\n    \"data\":
        [\n\n    ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\":
        \"/v1/charges/py_1FqJeLFk4eGpfLOC4iLmeKkl/refunds\"\n  },\n  \"review\": null,\n
        \ \"shipping\": null,\n  \"source\": {\n    \"id\": \"src_1FqJeKFk4eGpfLOChUFsMrh9\",\n
        \   \"object\": \"source\",\n    \"amount\": 5200,\n    \"client_secret\":
        \"src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\",\n    \"created\": 1576503013,\n
        \   \"currency\": \"eur\",\n    \"customer\": \"cus_GN3letVcTd9fGe\",\n    \"flow\":
        \"none\",\n    \"livemode\": false,\n    \"mandate\": {\n      \"acceptance\":
        {\n        \"date\": null,\n        \"ip\": null,\n        \"offline\": null,\n
        \       \"online\": null,\n        \"status\": \"pending\",\n        \"type\":
        null,\n        \"user_agent\": null\n      },\n      \"amount\": null,\n      \"currency\":
        null,\n      \"interval\": \"variable\",\n      \"notification_method\": \"none\",\n
        \     \"reference\": \"FINXAZJNJCHUUHHQ\",\n      \"url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeKFk4eGpfLOChUFsMrh9/src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\"\n
        \   },\n    \"metadata\": {\n    },\n    \"owner\": {\n      \"address\":
        {\n        \"city\": null,\n        \"country\": \"DE\",\n        \"line1\":
        null,\n        \"line2\": null,\n        \"postal_code\": null,\n        \"state\":
        null\n      },\n      \"email\": \"donor@example.com\",\n      \"name\": \"Jane
        Doe\",\n      \"phone\": null,\n      \"verified_address\": null,\n      \"verified_email\":
        null,\n      \"verified_name\": null,\n      \"verified_phone\": null\n    },\n
        \   \"sepa_debit\": {\n      \"last4\": \"3000\",\n      \"bank_code\": \"37040044\",\n
        \     \"fingerprint\": \"VNz5BVW8XnYcq3XT\",\n      \"country\": \"DE\",\n
        \     \"mandate_reference\": \"FINXAZJNJCHUUHHQ\",\n      \"mandate_url\":
        \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeKFk4eGpfLOChUFsMrh9/src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\",\n
        \     \"branch_code\": null\n    },\n    \"statement_descriptor\": null,\n
        \   \"status\": \"chargeable\",\n    \"type\": \"sepa_debit\",\n    \"usage\":
        \"reusable\"\n  },\n  \"source_transfer\": null,\n  \"statement_descriptor\":
        \"Liberapay 1320\",\n  \"statement_descriptor_suffix\": null,\n  \"status\":
        \"pending\",\n  \"transfer_data\": null,\n  \"transfer_group\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '3722'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:13 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - payin_1320
      original-request:
      - req_pXHmcV9gpTkfD4
      request-id:
      - req_pXHmcV9gpTkfD4
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/sources/src_1FqJeKFk4eGpfLOChUFsMrh9
  response:
    body:
      string: "{\n  \"id\": \"src_1FqJeKFk4eGpfLOChUFsMrh9\",\n  \"object\": \"source\",\n
        \ \"amount\": 5200,\n  \"client_secret\": \"src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\",\n
        \ \"created\": 1576503012,\n  \"currency\": \"eur\",\n  \"customer\": \"cus_GN3letVcTd9fGe\",\n
        \ \"flow\": \"none\",\n  \"livemode\": false,\n  \"mandate\": {\n    \"acceptance\":
        {\n      \"date\": null,\n      \"ip\": null,\n      \"offline\": null,\n
        \     \"online\": null,\n      \"status\": \"pending\",\n      \"type\": null,\n
        \     \"user_agent\": null\n    },\n    \"amount\": null,\n    \"currency\":
        null,\n    \"interval\": \"variable\",\n    \"notification_method\": \"none\",\n
        \   \"reference\": \"FINXAZJNJCHUUHHQ\",\n    \"url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeKFk4eGpfLOChUFsMrh9/src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\"\n
        \ },\n  \"metadata\": {\n  },\n  \"owner\": {\n    \"address\": {\n      \"city\":
        null,\n      \"country\": \"DE\",\n      \"line1\": null,\n      \"line2\":
        null,\n      \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\":
        \"donor@example.com\",\n    \"name\": \"Jane Doe\",\n    \"phone\": null,\n
        \   \"verified_address\": null,\n    \"verified_email\": null,\n    \"verified_name\":
        null,\n    \"verified_phone\": null\n  },\n  \"sepa_debit\": {\n    \"last4\":
        \"3000\",\n    \"bank_code\": \"37040044\",\n    \"fingerprint\": \"VNz5BVW8XnYcq3XT\",\n
        \   \"country\": \"DE\",\n    \"mandate_reference\": \"FINXAZJNJCHUUHHQ\",\n
        \   \"mandate_url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeKFk4eGpfLOChUFsMrh9/src_client_secret_GN3lj00Ja59n2XF84pTnGSZh\",\n
        \   \"branch_code\": null\n  },\n  \"statement_descriptor\": null,\n  \"status\":
        \"chargeable\",\n  \"type\": \"sepa_debit\",\n  \"usage\": \"reusable\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1581'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:13 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_br8EJtL1xWZyoO
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/tokens/tok_jp
  response:
    body:
      string: "{\n  \"id\": \"tok_1FqJeMFk4eGpfLOCcTnTC6HB\",\n  \"object\": \"token\",\n
        \ \"card\": {\n    \"id\": \"card_1FqJeMFk4eGpfLOCKRldEusc\",\n    \"object\":
        \"card\",\n    \"address_city\": null,\n    \"address_country\": null,\n    \"address_line1\":
        null,\n    \"address_line1_check\": null,\n    \"address_line2\": null,\n
        \   \"address_state\": null,\n    \"address_zip\": null,\n    \"address_zip_check\":
        null,\n    \"brand\": \"Visa\",\n    \"country\": \"JP\",\n    \"currency\":
        \"usd\",\n    \"cvc_check\": null,\n    \"dynamic_last4\": null,\n    \"exp_month\":
        12,\n    \"exp_year\": 2020,\n    \"fingerprint\": \"4heNPBHbDWXWyXBc\",\n
        \   \"funding\": \"credit\",\n    \"last4\": \"0003\",\n    \"metadata\":
        {\n    },\n    \"name\": null,\n    \"tokenization_method\": null\n  },\n
        \ \"client_ip\": null,\n  \"created\": 1576503014,\n  \"livemode\": false,\n
        \ \"type\": \"card\",\n  \"used\": false\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '791'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:14 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_AZtQ2PDTXQSMHB
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: amount=10000&owner[email]=donor%40example.com&redirect[return_url]=http%3A%2F%2Flocalhost%2Fdonor%2Fgiving%2Fpay%2Fstripe%2Fcomplete&token=tok_1FqJeMFk4eGpfLOCcTnTC6HB&type=card&usage=single_use
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/sources
  response:
    body:
      string: "{\n  \"id\": \"src_1FqJeMFk4eGpfLOCh7HW6Tia\",\n  \"object\": \"source\",\n
        \ \"amount\": 10000,\n  \"card\": {\n    \"exp_month\": 12,\n    \"exp_year\":
        2020,\n    \"last4\": \"0003\",\n    \"country\": \"JP\",\n    \"brand\":
        \"Visa\",\n    \"funding\": \"credit\",\n    \"fingerprint\": \"4heNPBHbDWXWyXBc\",\n
        \   \"three_d_secure\": \"optional\",\n    \"name\": null,\n    \"address_line1_check\":
        null,\n    \"address_zip_check\": null,\n    \"cvc_check\": null,\n    \"tokenization_method\":
        null,\n    \"dynamic_last4\": null\n  },\n  \"client_secret\": \"src_client_secret_GN3lyz288vv0Jhc6gaJcuBHv\",\n
        \ \"created\": 1576503014,\n  \"currency\": null,\n  \"flow\": \"none\",\n
        \ \"livemode\": false,\n  \"metadata\": {\n  },\n  \"owner\": {\n    \"address\":
        null,\n    \"email\": \"donor@example.com\",\n    \"name\": null,\n    \"phone\":
        null,\n    \"verified_address\": null,\n    \"verified_email\": null,\n    \"verified_name\":
        null,\n    \"verified_phone\": null\n  },\n  \"statement_descriptor\": null,\n
        \ \"status\": \"chargeable\",\n  \"type\": \"card\",\n  \"usage\": \"single_use\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '962'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:14 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - create_source_from_tok_1FqJeMFk4eGpfLOCcTnTC6HB
      original-request:
      - req_o9EV2ayiKLxKU4
      request-id:
      - req_o9EV2ayiKLxKU4
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: email=donor%40example.com&source=src_1FqJeMFk4eGpfLOCh7HW6Tia
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/customers
  response:
    body:
      string: "{\n  \"id\": \"cus_GN3loUVjRRHEDp\",\n  \"object\": \"customer\",\n
        \ \"account_balance\": 0,\n  \"address\": null,\n  \"balance\": 0,\n  \"created\":
        1576503014,\n  \"currency\": null,\n  \"default_source\": \"src_1FqJeMFk4eGpfLOCh7HW6Tia\",\n
        \ \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n
        \ \"email\": \"donor@example.com\",\n  \"invoice_prefix\": \"D5EF24DC\",\n
        \ \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\":
        null,\n    \"footer\": null\n  },\n  \"livemode\": false,\n  \"metadata\":
        {\n  },\n  \"name\": null,\n  \"phone\": null,\n  \"preferred_locales\": [\n\n
        \ ],\n  \"shipping\": null,\n  \"sources\": {\n    \"object\": \"list\",\n
        \   \"data\": [\n      {\n        \"id\": \"src_1FqJeMFk4eGpfLOCh7HW6Tia\",\n
        \       \"object\": \"source\",\n        \"amount\": 10000,\n        \"card\":
        {\n          \"exp_month\": 12,\n          \"exp_year\": 2020,\n          \"last4\":
        \"0003\",\n          \"country\": \"JP\",\n          \"brand\": \"Visa\",\n
        \         \"funding\": \"credit\",\n          \"fingerprint\": \"4heNPBHbDWXWyXBc\",\n
        \         \"three_d_secure\": \"optional\",\n          \"name\": null,\n          \"address_line1_check\":
        null,\n          \"address_zip_check\": null,\n          \"cvc_check\": null,\n
        \         \"tokenization_method\": null,\n          \"dynamic_last4\": null\n
        \       },\n        \"client_secret\": \"src_client_secret_GN3lyz288vv0Jhc6gaJcuBHv\",\n
        \       \"created\": 1576503014,\n        \"currency\": null,\n        \"customer\":
        \"cus_GN3loUVjRRHEDp\",\n        \"flow\": \"none\",\n        \"livemode\":
        false,\n        \"metadata\": {\n        },\n        \"owner\": {\n          \"address\":
        null,\n          \"email\": \"donor@example.com\",\n          \"name\": null,\n
        \         \"phone\": null,\n          \"verified_address\": null,\n          \"verified_email\":
        null,\n          \"verified_name\": null,\n          \"verified_phone\": null\n
        \       },\n        \"statement_descriptor\": null,\n        \"status\": \"chargeable\",\n
        \       \"type\": \"card\",\n        \"usage\": \"single_use\"\n      }\n
        \   ],\n    \"has_more\": false,\n    \"total_count\": 1,\n    \"url\": \"/v1/customers/cus_GN3loUVjRRHEDp/sources\"\n
        \ },\n  \"subscriptions\": {\n    \"object\": \"list\",\n    \"data\": [\n\n
        \   ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\": \"/v1/customers/cus_GN3loUVjRRHEDp/subscriptions\"\n
        \ },\n  \"tax_exempt\": \"none\",\n  \"tax_ids\": {\n    \"object\": \"list\",\n
        \   \"data\": [\n\n    ],\n    \"has_more\": false,\n    \"total_count\":
        0,\n    \"url\": \"/v1/customers/cus_GN3loUVjRRHEDp/tax_ids\"\n  },\n  \"tax_info\":
        null,\n  \"tax_info_verification\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '2413'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:15 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - create_customer_for_participant_1330
      original-request:
      - req_XX5KExJkYFZmPS
      request-id:
      - req_XX5KExJkYFZmPS
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: amount=10000&currency=jpy&customer=cus_GN3loUVjRRHEDp&metadata[payin_id]=1330&source=src_1FqJeMFk4eGpfLOCh7HW6Tia&statement_descriptor=Liberapay+1330&expand[0]=balance_transaction
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/charges
  response:
    body:
      string: "{\n  \"id\": \"ch_1FqJeNFk4eGpfLOCXG2HS1dz\",\n  \"object\": \"charge\",\n
        \ \"amount\": 10000,\n  \"amount_refunded\": 0,\n  \"application\": null,\n
        \ \"application_fee\": null,\n  \"application_fee_amount\": null,\n  \"balance_transaction\":
        {\n    \"id\": \"txn_1FqJeNFk4eGpfLOCA7woL92O\",\n    \"object\": \"balance_transaction\",\n
        \   \"amount\": 8034,\n    \"available_on\": 1577059200,\n    \"created\":
        1576503015,\n    \"currency\": \"eur\",\n    \"description\": null,\n    \"exchange_rate\":
        0.80338,\n    \"fee\": 258,\n    \"fee_details\": [\n      {\n        \"amount\":
        258,\n        \"application\": null,\n        \"currency\": \"eur\",\n        \"description\":
        \"Stripe processing fees\",\n        \"type\": \"stripe_fee\"\n      }\n    ],\n
        \   \"net\": 7776,\n    \"source\": \"ch_1FqJeNFk4eGpfLOCXG2HS1dz\",\n    \"status\":
        \"pending\",\n    \"type\": \"charge\"\n  },\n  \"billing_details\": {\n    \"address\":
        {\n      \"city\": null,\n      \"country\": null,\n      \"line1\": null,\n
        \     \"line2\": null,\n      \"postal_code\": null,\n      \"state\": null\n
        \   },\n    \"email\": \"donor@example.com\",\n    \"name\": null,\n    \"phone\":
        null\n  },\n  \"captured\": true,\n  \"created\": 1576503015,\n  \"currency\":
        \"jpy\",\n  \"customer\": \"cus_GN3loUVjRRHEDp\",\n  \"description\": null,\n
        \ \"destination\": null,\n  \"dispute\": null,\n  \"disputed\": false,\n  \"failure_code\":
        null,\n  \"failure_message\": null,\n  \"fraud_details\": {\n  },\n  \"invoice\":
        null,\n  \"livemode\": false,\n  \"metadata\": {\n    \"payin_id\": \"1330\"\n
        \ },\n  \"on_behalf_of\": null,\n  \"order\": null,\n  \"outcome\": {\n    \"network_status\":
        \"approved_by_network\",\n    \"reason\": null,\n    \"risk_level\": \"normal\",\n
        \   \"risk_score\": 27,\n    \"seller_message\": \"Payment complete.\",\n
        \   \"type\": \"authorized\"\n  },\n  \"paid\": true,\n  \"payment_intent\":
        null,\n  \"payment_method\": \"src_1FqJeMFk4eGpfLOCh7HW6Tia\",\n  \"payment_method_details\":
        {\n    \"card\": {\n      \"brand\": \"visa\",\n      \"checks\": {\n        \"address_line1_check\":
        null,\n        \"address_postal_code_check\": null,\n        \"cvc_check\":
        null\n      },\n      \"country\": \"JP\",\n      \"exp_month\": 12,\n      \"exp_year\":
        2020,\n      \"fingerprint\": \"4heNPBHbDWXWyXBc\",\n      \"funding\": \"credit\",\n
        \     \"installments\": null,\n      \"last4\": \"0003\",\n      \"network\":
        \"visa\",\n      \"three_d_secure\": null,\n      \"wallet\": null\n    },\n
        \   \"type\": \"card\"\n  },\n  \"receipt_email\": null,\n  \"receipt_number\":
        null,\n  \"receipt_url\": \"https://pay.stripe.com/receipts/acct_1ChyayFk4eGpfLOC/ch_1FqJeNFk4eGpfLOCXG2HS1dz/rcpt_GN3lPrIxIfOwxdhdGY0rNTd86B4emwD\",\n
        \ \"refunded\": false,\n  \"refunds\": {\n    \"object\": \"list\",\n    \"data\":
        [\n\n    ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\":
        \"/v1/charges/ch_1FqJeNFk4eGpfLOCXG2HS1dz/refunds\"\n  },\n  \"review\": null,\n
        \ \"shipping\": null,\n  \"source\": {\n    \"id\": \"src_1FqJeMFk4eGpfLOCh7HW6Tia\",\n
        \   \"object\": \"source\",\n    \"amount\": 10000,\n    \"card\": {\n      \"exp_month\":
        12,\n      \"exp_year\": 2020,\n      \"last4\": \"0003\",\n      \"country\":
        \"JP\",\n      \"brand\": \"Visa\",\n      \"funding\": \"credit\",\n      \"fingerprint\":
        \"4heNPBHbDWXWyXBc\",\n      \"three_d_secure\": \"optional\",\n      \"name\":
        null,\n      \"address_line1_check\": null,\n      \"address_zip_check\":
        null,\n      \"cvc_check\": null,\n      \"tokenization_method\": null,\n
        \     \"dynamic_last4\": null\n    },\n    \"client_secret\": \"src_client_secret_GN3lyz288vv0Jhc6gaJcuBHv\",\n
        \   \"created\": 1576503015,\n    \"currency\": null,\n    \"customer\": \"cus_GN3loUVjRRHEDp\",\n
        \   \"flow\": \"none\",\n    \"livemode\": false,\n    \"metadata\": {\n    },\n
        \   \"owner\": {\n      \"address\": null,\n      \"email\": \"donor@example.com\",\n
        \     \"name\": null,\n      \"phone\": null,\n      \"verified_address\":
        null,\n      \"verified_email\": null,\n      \"verified_name\": null,\n      \"verified_phone\":
        null\n    },\n    \"statement_descriptor\": null,\n    \"status\": \"consumed\",\n
        \   \"type\": \"card\",\n    \"usage\": \"single_use\"\n  },\n  \"source_transfer\":
        null,\n  \"statement_descriptor\": \"Liberapay 1330\",\n  \"statement_descriptor_suffix\":
        \"Liberapay 1330\",\n  \"status\": \"succeeded\",\n  \"transfer_data\": null,\n
        \ \"transfer_group\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '3931'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:16 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - payin_1330
      original-request:
      - req_R1WrWm8I09PAAi
      request-id:
      - req_R1WrWm8I09PAAi
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: amount=3888&currency=EUR&destination=acct_1FqJeGGxJKe3V2vT&metadata[payin_transfer_id]=1330&source_transaction=ch_1FqJeNFk4eGpfLOCXG2HS1dz
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/transfers
  response:
    body:
      string: "{\n  \"id\": \"tr_1FqJeOFk4eGpfLOCxRRaQxnq\",\n  \"object\": \"transfer\",\n
        \ \"amount\": 3888,\n  \"amount_reversed\": 0,\n  \"balance_transaction\":
        \"txn_1FqJeOFk4eGpfLOCwxfNiAg4\",\n  \"created\": 1576503016,\n  \"currency\":
        \"eur\",\n  \"description\": null,\n  \"destination\": \"acct_1FqJeGGxJKe3V2vT\",\n
        \ \"destination_payment\": \"py_1FqJeOGxJKe3V2vT6mdiZqWU\",\n  \"livemode\":
        false,\n  \"metadata\": {\n    \"payin_transfer_id\": \"1330\"\n  },\n  \"reversals\":
        {\n    \"object\": \"list\",\n    \"data\": [\n\n    ],\n    \"has_more\":
        false,\n    \"total_count\": 0,\n    \"url\": \"/v1/transfers/tr_1FqJeOFk4eGpfLOCxRRaQxnq/reversals\"\n
        \ },\n  \"reversed\": false,\n  \"source_transaction\": \"ch_1FqJeNFk4eGpfLOCXG2HS1dz\",\n
        \ \"source_type\": \"card\",\n  \"transfer_group\": \"group_ch_1FqJeNFk4eGpfLOCXG2HS1dz\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '740'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:17 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - payin_transfer_1330
      original-request:
      - req_xerSdu2JYYcEZb
      request-id:
      - req_xerSdu2JYYcEZb
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: bank_account[country]=FR&bank_account[currency]=EUR&bank_account[account_number]=FR1420041010050500013M02606&bank_account[account_holder_name]=Jane+Doe
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/tokens
  response:
    body:
      string: "{\n  \"id\": \"btok_1FqJePFk4eGpfLOCn68PaeE9\",\n  \"object\": \"token\",\n
        \ \"bank_account\": {\n    \"id\": \"ba_1FqJePFk4eGpfLOCMyMtRGzf\",\n    \"object\":
        \"bank_account\",\n    \"account_holder_name\": \"Jane Doe\",\n    \"account_holder_type\":
        null,\n    \"bank_name\": \"STRIPE TEST BANK\",\n    \"country\": \"FR\",\n
        \   \"currency\": \"eur\",\n    \"fingerprint\": \"T8MDJUvoericCF3x\",\n    \"last4\":
        \"2606\",\n    \"routing_number\": \"110000000\",\n    \"status\": \"new\"\n
        \ },\n  \"client_ip\": \"45.152.181.148\",\n  \"created\": 1576503017,\n  \"livemode\":
        false,\n  \"type\": \"bank_account\",\n  \"used\": false\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '551'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:17 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - ff5f7dd0-de2d-405d-ab46-40308bb93175
      original-request:
      - req_ziN1ZXRCEdmkZX
      request-id:
      - req_ziN1ZXRCEdmkZX
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/tokens/btok_1FqJePFk4eGpfLOCn68PaeE9
  response:
    body:
      string: "{\n  \"id\": \"btok_1FqJePFk4eGpfLOCn68PaeE9\",\n  \"object\": \"token\",\n
        \ \"bank_account\": {\n    \"id\": \"ba_1FqJePFk4eGpfLOCMyMtRGzf\",\n    \"object\":
        \"bank_account\",\n    \"account_holder_name\": \"Jane Doe\",\n    \"account_holder_type\":
        null,\n    \"bank_name\": \"STRIPE TEST BANK\",\n    \"country\": \"FR\",\n
        \   \"currency\": \"eur\",\n    \"fingerprint\": \"T8MDJUvoericCF3x\",\n    \"last4\":
        \"2606\",\n    \"routing_number\": \"110000000\",\n    \"status\": \"new\"\n
        \ },\n  \"client_ip\": \"45.152.181.148\",\n  \"created\": 1576503017,\n  \"livemode\":
        false,\n  \"type\": \"bank_account\",\n  \"used\": false\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '551'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:18 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_1R3HEIAZBrF9Cq
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: owner[email]=donor%40example.com&redirect[return_url]=http%3A%2F%2Flocalhost%2Fdonor%2Fgiving%2Fpay%2Fstripe%2Fcomplete&token=btok_1FqJePFk4eGpfLOCn68PaeE9&type=sepa_debit&usage=reusable
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/sources
  response:
    body:
      string: "{\n  \"id\": \"src_1FqJeQFk4eGpfLOCpFLrJb6X\",\n  \"object\": \"source\",\n
        \ \"amount\": null,\n  \"client_secret\": \"src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\",\n
        \ \"created\": 1576503018,\n  \"currency\": \"eur\",\n  \"flow\": \"none\",\n
        \ \"livemode\": false,\n  \"mandate\": {\n    \"acceptance\": {\n      \"date\":
        null,\n      \"ip\": null,\n      \"offline\": null,\n      \"online\": null,\n
        \     \"status\": \"pending\",\n      \"type\": null,\n      \"user_agent\":
        null\n    },\n    \"amount\": null,\n    \"currency\": null,\n    \"interval\":
        \"variable\",\n    \"notification_method\": \"none\",\n    \"reference\":
        \"H7UVS3UXJDF5UGKM\",\n    \"url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \ },\n  \"metadata\": {\n  },\n  \"owner\": {\n    \"address\": {\n      \"city\":
        null,\n      \"country\": \"FR\",\n      \"line1\": null,\n      \"line2\":
        null,\n      \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\":
        \"donor@example.com\",\n    \"name\": \"Jane Doe\",\n    \"phone\": null,\n
        \   \"verified_address\": null,\n    \"verified_email\": null,\n    \"verified_name\":
        null,\n    \"verified_phone\": null\n  },\n  \"sepa_debit\": {\n    \"last4\":
        \"2606\",\n    \"bank_code\": \"20041\",\n    \"branch_code\": \"01005\",\n
        \   \"fingerprint\": \"bevtMDy4Cud4ZswV\",\n    \"country\": \"FR\",\n    \"mandate_reference\":
        \"H7UVS3UXJDF5UGKM\",\n    \"mandate_url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \ },\n  \"statement_descriptor\": null,\n  \"status\": \"chargeable\",\n  \"type\":
        \"sepa_debit\",\n  \"usage\": \"reusable\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1545'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:18 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - create_source_from_btok_1FqJePFk4eGpfLOCn68PaeE9
      original-request:
      - req_72MYL9HhwUQZdE
      request-id:
      - req_72MYL9HhwUQZdE
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: email=donor%40example.com&source=src_1FqJeQFk4eGpfLOCpFLrJb6X
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/customers
  response:
    body:
      string: "{\n  \"id\": \"cus_GN3lMkZaEbHY8I\",\n  \"object\": \"customer\",\n
        \ \"account_balance\": 0,\n  \"address\": null,\n  \"balance\": 0,\n  \"created\":
        1576503018,\n  \"currency\": null,\n  \"default_source\": \"src_1FqJeQFk4eGpfLOCpFLrJb6X\",\n
        \ \"delinquent\": false,\n  \"description\": null,\n  \"discount\": null,\n
        \ \"email\": \"donor@example.com\",\n  \"invoice_prefix\": \"6467E527\",\n
        \ \"invoice_settings\": {\n    \"custom_fields\": null,\n    \"default_payment_method\":
        null,\n    \"footer\": null\n  },\n  \"livemode\": false,\n  \"metadata\":
        {\n  },\n  \"name\": null,\n  \"phone\": null,\n  \"preferred_locales\": [\n\n
        \ ],\n  \"shipping\": null,\n  \"sources\": {\n    \"object\": \"list\",\n
        \   \"data\": [\n      {\n        \"id\": \"src_1FqJeQFk4eGpfLOCpFLrJb6X\",\n
        \       \"object\": \"source\",\n        \"amount\": null,\n        \"client_secret\":
        \"src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\",\n        \"created\": 1576503018,\n
        \       \"currency\": \"eur\",\n        \"customer\": \"cus_GN3lMkZaEbHY8I\",\n
        \       \"flow\": \"none\",\n        \"livemode\": false,\n        \"mandate\":
        {\n          \"acceptance\": {\n            \"date\": null,\n            \"ip\":
        null,\n            \"offline\": null,\n            \"online\": null,\n            \"status\":
        \"pending\",\n            \"type\": null,\n            \"user_agent\": null\n
        \         },\n          \"amount\": null,\n          \"currency\": null,\n
        \         \"interval\": \"variable\",\n          \"notification_method\":
        \"none\",\n          \"reference\": \"H7UVS3UXJDF5UGKM\",\n          \"url\":
        \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \       },\n        \"metadata\": {\n        },\n        \"owner\": {\n          \"address\":
        {\n            \"city\": null,\n            \"country\": \"FR\",\n            \"line1\":
        null,\n            \"line2\": null,\n            \"postal_code\": null,\n
        \           \"state\": null\n          },\n          \"email\": \"donor@example.com\",\n
        \         \"name\": \"Jane Doe\",\n          \"phone\": null,\n          \"verified_address\":
        null,\n          \"verified_email\": null,\n          \"verified_name\": null,\n
        \         \"verified_phone\": null\n        },\n        \"sepa_debit\": {\n
        \         \"last4\": \"2606\",\n          \"bank_code\": \"20041\",\n          \"branch_code\":
        \"01005\",\n          \"fingerprint\": \"bevtMDy4Cud4ZswV\",\n          \"country\":
        \"FR\",\n          \"mandate_reference\": \"H7UVS3UXJDF5UGKM\",\n          \"mandate_url\":
        \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \       },\n        \"statement_descriptor\": null,\n        \"status\": \"chargeable\",\n
        \       \"type\": \"sepa_debit\",\n        \"usage\": \"reusable\"\n      }\n
        \   ],\n    \"has_more\": false,\n    \"total_count\": 1,\n    \"url\": \"/v1/customers/cus_GN3lMkZaEbHY8I/sources\"\n
        \ },\n  \"subscriptions\": {\n    \"object\": \"list\",\n    \"data\": [\n\n
        \   ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\": \"/v1/customers/cus_GN3lMkZaEbHY8I/subscriptions\"\n
        \ },\n  \"tax_exempt\": \"none\",\n  \"tax_ids\": {\n    \"object\": \"list\",\n
        \   \"data\": [\n\n    ],\n    \"has_more\": false,\n    \"total_count\":
        0,\n    \"url\": \"/v1/customers/cus_GN3lMkZaEbHY8I/tax_ids\"\n  },\n  \"tax_info\":
        null,\n  \"tax_info_verification\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '3098'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:18 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - create_customer_for_participant_1340
      original-request:
      - req_FMVY9eS0BTKcif
      request-id:
      - req_FMVY9eS0BTKcif
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: amount=10000&currency=eur&customer=cus_GN3lMkZaEbHY8I&metadata[payin_id]=1340&source=src_1FqJeQFk4eGpfLOCpFLrJb6X&statement_descriptor=Liberapay+1340&expand[0]=balance_transaction
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/charges
  response:
    body:
      string: "{\n  \"id\": \"py_1FqJeRFk4eGpfLOCtTg5UpC4\",\n  \"object\": \"charge\",\n
        \ \"amount\": 10000,\n  \"amount_refunded\": 0,\n  \"application\": null,\n
        \ \"application_fee\": null,\n  \"application_fee_amount\": null,\n  \"balance_transaction\":
        null,\n  \"billing_details\": {\n    \"address\": {\n      \"city\": null,\n
        \     \"country\": \"FR\",\n      \"line1\": null,\n      \"line2\": null,\n
        \     \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\":
        \"donor@example.com\",\n    \"name\": \"Jane Doe\",\n    \"phone\": null\n
        \ },\n  \"captured\": true,\n  \"created\": 1576503019,\n  \"currency\": \"eur\",\n
        \ \"customer\": \"cus_GN3lMkZaEbHY8I\",\n  \"description\": null,\n  \"destination\":
        null,\n  \"dispute\": null,\n  \"disputed\": false,\n  \"failure_code\": null,\n
        \ \"failure_message\": null,\n  \"fraud_details\": {\n  },\n  \"invoice\":
        null,\n  \"livemode\": false,\n  \"metadata\": {\n    \"payin_id\": \"1340\"\n
        \ },\n  \"on_behalf_of\": null,\n  \"order\": null,\n  \"outcome\": {\n    \"network_status\":
        \"approved_by_network\",\n    \"reason\": null,\n    \"risk_level\": \"not_assessed\",\n
        \   \"seller_message\": \"Payment complete.\",\n    \"type\": \"authorized\"\n
        \ },\n  \"paid\": false,\n  \"payment_intent\": null,\n  \"payment_method\":
        \"src_1FqJeQFk4eGpfLOCpFLrJb6X\",\n  \"payment_method_details\": {\n    \"sepa_debit\":
        {\n      \"bank_code\": \"20041\",\n      \"branch_code\": \"01005\",\n      \"country\":
        \"FR\",\n      \"fingerprint\": \"bevtMDy4Cud4ZswV\",\n      \"last4\": \"2606\",\n
        \     \"mandate\": null\n    },\n    \"type\": \"sepa_debit\"\n  },\n  \"receipt_email\":
        null,\n  \"receipt_number\": null,\n  \"receipt_url\": \"https://pay.stripe.com/receipts/acct_1ChyayFk4eGpfLOC/py_1FqJeRFk4eGpfLOCtTg5UpC4/rcpt_GN3luSTvMZlfXEBQlfCFGLeKpLvyQOr\",\n
        \ \"refunded\": false,\n  \"refunds\": {\n    \"object\": \"list\",\n    \"data\":
        [\n\n    ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\":
        \"/v1/charges/py_1FqJeRFk4eGpfLOCtTg5UpC4/refunds\"\n  },\n  \"review\": null,\n
        \ \"shipping\": null,\n  \"source\": {\n    \"id\": \"src_1FqJeQFk4eGpfLOCpFLrJb6X\",\n
        \   \"object\": \"source\",\n    \"amount\": null,\n    \"client_secret\":
        \"src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\",\n    \"created\": 1576503019,\n
        \   \"currency\": \"eur\",\n    \"customer\": \"cus_GN3lMkZaEbHY8I\",\n    \"flow\":
        \"none\",\n    \"livemode\": false,\n    \"mandate\": {\n      \"acceptance\":
        {\n        \"date\": null,\n        \"ip\": null,\n        \"offline\": null,\n
        \       \"online\": null,\n        \"status\": \"pending\",\n        \"type\":
        null,\n        \"user_agent\": null\n      },\n      \"amount\": null,\n      \"currency\":
        null,\n      \"interval\": \"variable\",\n      \"notification_method\": \"none\",\n
        \     \"reference\": \"H7UVS3UXJDF5UGKM\",\n      \"url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \   },\n    \"metadata\": {\n    },\n    \"owner\": {\n      \"address\":
        {\n        \"city\": null,\n        \"country\": \"FR\",\n        \"line1\":
        null,\n        \"line2\": null,\n        \"postal_code\": null,\n        \"state\":
        null\n      },\n      \"email\": \"donor@example.com\",\n      \"name\": \"Jane
        Doe\",\n      \"phone\": null,\n      \"verified_address\": null,\n      \"verified_email\":
        null,\n      \"verified_name\": null,\n      \"verified_phone\": null\n    },\n
        \   \"sepa_debit\": {\n      \"last4\": \"2606\",\n      \"bank_code\": \"20041\",\n
        \     \"branch_code\": \"01005\",\n      \"fingerprint\": \"bevtMDy4Cud4ZswV\",\n
        \     \"country\": \"FR\",\n      \"mandate_reference\": \"H7UVS3UXJDF5UGKM\",\n
        \     \"mandate_url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \   },\n    \"statement_descriptor\": null,\n    \"status\": \"chargeable\",\n
        \   \"type\": \"sepa_debit\",\n    \"usage\": \"reusable\"\n  },\n  \"source_transfer\":
        null,\n  \"statement_descriptor\": \"Liberapay 1340\",\n  \"statement_descriptor_suffix\":
        null,\n  \"status\": \"pending\",\n  \"transfer_data\": null,\n  \"transfer_group\":
        null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '3723'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:19 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - payin_1340
      original-request:
      - req_DlHDAHJVh0yZmo
      request-id:
      - req_DlHDAHJVh0yZmo
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/sources/src_1FqJeQFk4eGpfLOCpFLrJb6X
  response:
    body:
      string: "{\n  \"id\": \"src_1FqJeQFk4eGpfLOCpFLrJb6X\",\n  \"object\": \"source\",\n
        \ \"amount\": null,\n  \"client_secret\": \"src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\",\n
        \ \"created\": 1576503018,\n  \"currency\": \"eur\",\n  \"customer\": \"cus_GN3lMkZaEbHY8I\",\n
        \ \"flow\": \"none\",\n  \"livemode\": false,\n  \"mandate\": {\n    \"acceptance\":
        {\n      \"date\": null,\n      \"ip\": null,\n      \"offline\": null,\n
        \     \"online\": null,\n      \"status\": \"pending\",\n      \"type\": null,\n
        \     \"user_agent\": null\n    },\n    \"amount\": null,\n    \"currency\":
        null,\n    \"interval\": \"variable\",\n    \"notification_method\": \"none\",\n
        \   \"reference\": \"H7UVS3UXJDF5UGKM\",\n    \"url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \ },\n  \"metadata\": {\n  },\n  \"owner\": {\n    \"address\": {\n      \"city\":
        null,\n      \"country\": \"FR\",\n      \"line1\": null,\n      \"line2\":
        null,\n      \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\":
        \"donor@example.com\",\n    \"name\": \"Jane Doe\",\n    \"phone\": null,\n
        \   \"verified_address\": null,\n    \"verified_email\": null,\n    \"verified_name\":
        null,\n    \"verified_phone\": null\n  },\n  \"sepa_debit\": {\n    \"last4\":
        \"2606\",\n    \"bank_code\": \"20041\",\n    \"branch_code\": \"01005\",\n
        \   \"fingerprint\": \"bevtMDy4Cud4ZswV\",\n    \"country\": \"FR\",\n    \"mandate_reference\":
        \"H7UVS3UXJDF5UGKM\",\n    \"mandate_url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \ },\n  \"statement_descriptor\": null,\n  \"status\": \"chargeable\",\n  \"type\":
        \"sepa_debit\",\n  \"usage\": \"reusable\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1581'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:19 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_6vXmjxp3TpoLVy
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/sources/src_1FqJeQFk4eGpfLOCpFLrJb6X
  response:
    body:
      string: "{\n  \"id\": \"src_1FqJeQFk4eGpfLOCpFLrJb6X\",\n  \"object\": \"source\",\n
        \ \"amount\": null,\n  \"client_secret\": \"src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\",\n
        \ \"created\": 1576503018,\n  \"currency\": \"eur\",\n  \"customer\": \"cus_GN3lMkZaEbHY8I\",\n
        \ \"flow\": \"none\",\n  \"livemode\": false,\n  \"mandate\": {\n    \"acceptance\":
        {\n      \"date\": null,\n      \"ip\": null,\n      \"offline\": null,\n
        \     \"online\": null,\n      \"status\": \"pending\",\n      \"type\": null,\n
        \     \"user_agent\": null\n    },\n    \"amount\": null,\n    \"currency\":
        null,\n    \"interval\": \"variable\",\n    \"notification_method\": \"none\",\n
        \   \"reference\": \"H7UVS3UXJDF5UGKM\",\n    \"url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \ },\n  \"metadata\": {\n  },\n  \"owner\": {\n    \"address\": {\n      \"city\":
        null,\n      \"country\": \"FR\",\n      \"line1\": null,\n      \"line2\":
        null,\n      \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\":
        \"donor@example.com\",\n    \"name\": \"Jane Doe\",\n    \"phone\": null,\n
        \   \"verified_address\": null,\n    \"verified_email\": null,\n    \"verified_name\":
        null,\n    \"verified_phone\": null\n  },\n  \"sepa_debit\": {\n    \"last4\":
        \"2606\",\n    \"bank_code\": \"20041\",\n    \"branch_code\": \"01005\",\n
        \   \"fingerprint\": \"bevtMDy4Cud4ZswV\",\n    \"country\": \"FR\",\n    \"mandate_reference\":
        \"H7UVS3UXJDF5UGKM\",\n    \"mandate_url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \ },\n  \"statement_descriptor\": null,\n  \"status\": \"chargeable\",\n  \"type\":
        \"sepa_debit\",\n  \"usage\": \"reusable\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1581'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:20 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_ILknf9V5gu7Z9a
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/sources/src_1FqJeQFk4eGpfLOCpFLrJb6X
  response:
    body:
      string: "{\n  \"id\": \"src_1FqJeQFk4eGpfLOCpFLrJb6X\",\n  \"object\": \"source\",\n
        \ \"amount\": null,\n  \"client_secret\": \"src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\",\n
        \ \"created\": 1576503018,\n  \"currency\": \"eur\",\n  \"customer\": \"cus_GN3lMkZaEbHY8I\",\n
        \ \"flow\": \"none\",\n  \"livemode\": false,\n  \"mandate\": {\n    \"acceptance\":
        {\n      \"date\": null,\n      \"ip\": null,\n      \"offline\": null,\n
        \     \"online\": null,\n      \"status\": \"pending\",\n      \"type\": null,\n
        \     \"user_agent\": null\n    },\n    \"amount\": null,\n    \"currency\":
        null,\n    \"interval\": \"variable\",\n    \"notification_method\": \"none\",\n
        \   \"reference\": \"H7UVS3UXJDF5UGKM\",\n    \"url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \ },\n  \"metadata\": {\n  },\n  \"owner\": {\n    \"address\": {\n      \"city\":
        null,\n      \"country\": \"FR\",\n      \"line1\": null,\n      \"line2\":
        null,\n      \"postal_code\": null,\n      \"state\": null\n    },\n    \"email\":
        \"donor@example.com\",\n    \"name\": \"Jane Doe\",\n    \"phone\": null,\n
        \   \"verified_address\": null,\n    \"verified_email\": null,\n    \"verified_name\":
        null,\n    \"verified_phone\": null\n  },\n  \"sepa_debit\": {\n    \"last4\":
        \"2606\",\n    \"bank_code\": \"20041\",\n    \"branch_code\": \"01005\",\n
        \   \"fingerprint\": \"bevtMDy4Cud4ZswV\",\n    \"country\": \"FR\",\n    \"mandate_reference\":
        \"H7UVS3UXJDF5UGKM\",\n    \"mandate_url\": \"https://hooks.stripe.com/adapter/sepa_debit/file/src_1FqJeQFk4eGpfLOCpFLrJb6X/src_client_secret_GN3lAOeI8LUh8W7NWBTsPWS7\"\n
        \ },\n  \"statement_descriptor\": null,\n  \"status\": \"chargeable\",\n  \"type\":
        \"sepa_debit\",\n  \"usage\": \"reusable\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1581'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:20 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_aNow24kurRWKg4
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/payment_methods/pm_card_visa
  response:
    body:
      string: "{\n  \"id\": \"pm_1FqJeSFk4eGpfLOCuvWvHB5X\",\n  \"object\": \"payment_method\",\n
        \ \"billing_details\": {\n    \"address\": {\n      \"city\": null,\n      \"country\":
        null,\n      \"line1\": null,\n      \"line2\": null,\n      \"postal_code\":
        null,\n      \"state\": null\n    },\n    \"email\": null,\n    \"name\":
        null,\n    \"phone\": null\n  },\n  \"card\": {\n    \"brand\": \"visa\",\n
        \   \"checks\": {\n      \"address_line1_check\": null,\n      \"address_postal_code_check\":
        null,\n      \"cvc_check\": null\n    },\n    \"country\": \"US\",\n    \"exp_month\":
        12,\n    \"exp_year\": 2020,\n    \"fingerprint\": \"k6ycurEAdsI1uF3b\",\n
        \   \"funding\": \"credit\",\n    \"generated_from\": null,\n    \"last4\":
        \"4242\",\n    \"three_d_secure_usage\": {\n      \"supported\": true\n    },\n
        \   \"wallet\": null\n  },\n  \"created\": 1576503020,\n  \"customer\": null,\n
        \ \"livemode\": false,\n  \"metadata\": {\n  },\n  \"type\": \"card\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '834'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:21 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_H6epeWwbXyaZdE
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: email=donor%40example.com&payment_method=pm_1FqJeSFk4eGpfLOCuvWvHB5X
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/customers
  response:
    body:
      string: "{\n  \"id\": \"cus_GN3mAK4BsO9CXh\",\n  \"object\": \"customer\",\n
        \ \"account_balance\": 0,\n  \"address\": null,\n  \"balance\": 0,\n  \"created\":
        1576503021,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\":
        false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": \"donor@example.com\",\n
        \ \"invoice_prefix\": \"E3189F04\",\n  \"invoice_settings\": {\n    \"custom_fields\":
        null,\n    \"default_payment_method\": null,\n    \"footer\": null\n  },\n
        \ \"livemode\": false,\n  \"metadata\": {\n  },\n  \"name\": null,\n  \"phone\":
        null,\n  \"preferred_locales\": [\n\n  ],\n  \"shipping\": null,\n  \"sources\":
        {\n    \"object\": \"list\",\n    \"data\": [\n\n    ],\n    \"has_more\":
        false,\n    \"total_count\": 0,\n    \"url\": \"/v1/customers/cus_GN3mAK4BsO9CXh/sources\"\n
        \ },\n  \"subscriptions\": {\n    \"object\": \"list\",\n    \"data\": [\n\n
        \   ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\": \"/v1/customers/cus_GN3mAK4BsO9CXh/subscriptions\"\n
        \ },\n  \"tax_exempt\": \"none\",\n  \"tax_ids\": {\n    \"object\": \"list\",\n
        \   \"data\": [\n\n    ],\n    \"has_more\": false,\n    \"total_count\":
        0,\n    \"url\": \"/v1/customers/cus_GN3mAK4BsO9CXh/tax_ids\"\n  },\n  \"tax_info\":
        null,\n  \"tax_info_verification\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1132'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:21 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - create_customer_for_participant_1350
      original-request:
      - req_zZXW4gMlLyKP2X
      request-id:
      - req_zZXW4gMlLyKP2X
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: amount=2500&confirm=True&currency=eur&customer=cus_GN3mAK4BsO9CXh&metadata[payin_id]=1350&payment_method=pm_1FqJeSFk4eGpfLOCuvWvHB5X&return_url=http%3A%2F%2Flocalhost%2Fdonor%2Fgiving%2Fpay%2Fstripe%2F1350&statement_descriptor=Liberapay+1350
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/payment_intents
  response:
    body:
      string: "{\n  \"id\": \"pi_1FqJeTFk4eGpfLOCFFwXIUl1\",\n  \"object\": \"payment_intent\",\n
        \ \"amount\": 2500,\n  \"amount_capturable\": 0,\n  \"amount_received\": 2500,\n
        \ \"application\": null,\n  \"application_fee_amount\": null,\n  \"canceled_at\":
        null,\n  \"cancellation_reason\": null,\n  \"capture_method\": \"automatic\",\n
        \ \"charges\": {\n    \"object\": \"list\",\n    \"data\": [\n      {\n        \"id\":
        \"ch_1FqJeUFk4eGpfLOC7p6IfSVR\",\n        \"object\": \"charge\",\n        \"amount\":
        2500,\n        \"amount_refunded\": 0,\n        \"application\": null,\n        \"application_fee\":
        null,\n        \"application_fee_amount\": null,\n        \"balance_transaction\":
        \"txn_1FqJeUFk4eGpfLOC8qpdOQU5\",\n        \"billing_details\": {\n          \"address\":
        {\n            \"city\": null,\n            \"country\": null,\n            \"line1\":
        null,\n            \"line2\": null,\n            \"postal_code\": null,\n
        \           \"state\": null\n          },\n          \"email\": null,\n          \"name\":
        null,\n          \"phone\": null\n        },\n        \"captured\": true,\n
        \       \"created\": 1576503022,\n        \"currency\": \"eur\",\n        \"customer\":
        \"cus_GN3mAK4BsO9CXh\",\n        \"description\": null,\n        \"destination\":
        null,\n        \"dispute\": null,\n        \"disputed\": false,\n        \"failure_code\":
        null,\n        \"failure_message\": null,\n        \"fraud_details\": {\n
        \       },\n        \"invoice\": null,\n        \"livemode\": false,\n        \"metadata\":
        {\n          \"payin_id\": \"1350\"\n        },\n        \"on_behalf_of\":
        null,\n        \"order\": null,\n        \"outcome\": {\n          \"network_status\":
        \"approved_by_network\",\n          \"reason\": null,\n          \"risk_level\":
        \"normal\",\n          \"risk_score\": 28,\n          \"seller_message\":
        \"Payment complete.\",\n          \"type\": \"authorized\"\n        },\n        \"paid\":
        true,\n        \"payment_intent\": \"pi_1FqJeTFk4eGpfLOCFFwXIUl1\",\n        \"payment_method\":
        \"pm_1FqJeSFk4eGpfLOCuvWvHB5X\",\n        \"payment_method_details\": {\n
        \         \"card\": {\n            \"brand\": \"visa\",\n            \"checks\":
        {\n              \"address_line1_check\": null,\n              \"address_postal_code_check\":
        null,\n              \"cvc_check\": null\n            },\n            \"country\":
        \"US\",\n            \"exp_month\": 12,\n            \"exp_year\": 2020,\n
        \           \"fingerprint\": \"k6ycurEAdsI1uF3b\",\n            \"funding\":
        \"credit\",\n            \"installments\": null,\n            \"last4\": \"4242\",\n
        \           \"network\": \"visa\",\n            \"three_d_secure\": null,\n
        \           \"wallet\": null\n          },\n          \"type\": \"card\"\n
        \       },\n        \"receipt_email\": null,\n        \"receipt_number\":
        null,\n        \"receipt_url\": \"https://pay.stripe.com/receipts/acct_1ChyayFk4eGpfLOC/ch_1FqJeUFk4eGpfLOC7p6IfSVR/rcpt_GN3mU6dFSOprVgN24l4IY8vacmF7uyQ\",\n
        \       \"refunded\": false,\n        \"refunds\": {\n          \"object\":
        \"list\",\n          \"data\": [\n\n          ],\n          \"has_more\":
        false,\n          \"total_count\": 0,\n          \"url\": \"/v1/charges/ch_1FqJeUFk4eGpfLOC7p6IfSVR/refunds\"\n
        \       },\n        \"review\": null,\n        \"shipping\": null,\n        \"source\":
        null,\n        \"source_transfer\": null,\n        \"statement_descriptor\":
        \"Liberapay 1350\",\n        \"statement_descriptor_suffix\": null,\n        \"status\":
        \"succeeded\",\n        \"transfer_data\": null,\n        \"transfer_group\":
        null\n      }\n    ],\n    \"has_more\": false,\n    \"total_count\": 1,\n
        \   \"url\": \"/v1/charges?payment_intent=pi_1FqJeTFk4eGpfLOCFFwXIUl1\"\n
        \ },\n  \"client_secret\": \"pi_1FqJeTFk4eGpfLOCFFwXIUl1_secret_PMzqZaeKi6VVxtiUJsCyb3O6d\",\n
        \ \"confirmation_method\": \"automatic\",\n  \"created\": 1576503021,\n  \"currency\":
        \"eur\",\n  \"customer\": \"cus_GN3mAK4BsO9CXh\",\n  \"description\": null,\n
        \ \"invoice\": null,\n  \"last_payment_error\": null,\n  \"livemode\": false,\n
        \ \"metadata\": {\n    \"payin_id\": \"1350\"\n  },\n  \"next_action\": null,\n
        \ \"on_behalf_of\": null,\n  \"payment_method\": \"pm_1FqJeSFk4eGpfLOCuvWvHB5X\",\n
        \ \"payment_method_options\": {\n    \"card\": {\n      \"installments\":
        null,\n      \"request_three_d_secure\": \"automatic\"\n    }\n  },\n  \"payment_method_types\":
        [\n    \"card\"\n  ],\n  \"receipt_email\": null,\n  \"review\": null,\n  \"setup_future_usage\":
        null,\n  \"shipping\": null,\n  \"source\": null,\n  \"statement_descriptor\":
        \"Liberapay 1350\",\n  \"statement_descriptor_suffix\": null,\n  \"status\":
        \"succeeded\",\n  \"transfer_data\": null,\n  \"transfer_group\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '4228'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:23 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - payin_intent_1350
      original-request:
      - req_5obF7c1VUaQHNb
      request-id:
      - req_5obF7c1VUaQHNb
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/balance_transactions/txn_1FqJeUFk4eGpfLOC8qpdOQU5
  response:
    body:
      string: "{\n  \"id\": \"txn_1FqJeUFk4eGpfLOC8qpdOQU5\",\n  \"object\": \"balance_transaction\",\n
        \ \"amount\": 2500,\n  \"available_on\": 1577059200,\n  \"created\": 1576503022,\n
        \ \"currency\": \"eur\",\n  \"description\": null,\n  \"exchange_rate\": null,\n
        \ \"fee\": 98,\n  \"fee_details\": [\n    {\n      \"amount\": 98,\n      \"application\":
        null,\n      \"currency\": \"eur\",\n      \"description\": \"Stripe processing
        fees\",\n      \"type\": \"stripe_fee\"\n    }\n  ],\n  \"net\": 2402,\n  \"source\":
        \"ch_1FqJeUFk4eGpfLOC7p6IfSVR\",\n  \"status\": \"pending\",\n  \"type\":
        \"charge\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '516'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:23 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_92mRdkVUxqTQhg
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/payment_methods/pm_1FqJeSFk4eGpfLOCuvWvHB5X
  response:
    body:
      string: "{\n  \"id\": \"pm_1FqJeSFk4eGpfLOCuvWvHB5X\",\n  \"object\": \"payment_method\",\n
        \ \"billing_details\": {\n    \"address\": {\n      \"city\": null,\n      \"country\":
        null,\n      \"line1\": null,\n      \"line2\": null,\n      \"postal_code\":
        null,\n      \"state\": null\n    },\n    \"email\": null,\n    \"name\":
        null,\n    \"phone\": null\n  },\n  \"card\": {\n    \"brand\": \"visa\",\n
        \   \"checks\": {\n      \"address_line1_check\": null,\n      \"address_postal_code_check\":
        null,\n      \"cvc_check\": null\n    },\n    \"country\": \"US\",\n    \"exp_month\":
        12,\n    \"exp_year\": 2020,\n    \"fingerprint\": \"k6ycurEAdsI1uF3b\",\n
        \   \"funding\": \"credit\",\n    \"generated_from\": null,\n    \"last4\":
        \"4242\",\n    \"three_d_secure_usage\": {\n      \"supported\": true\n    },\n
        \   \"wallet\": null\n  },\n  \"created\": 1576503020,\n  \"customer\": \"cus_GN3mAK4BsO9CXh\",\n
        \ \"livemode\": false,\n  \"metadata\": {\n  },\n  \"type\": \"card\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '850'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:23 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_UdwKP93M8hXFOT
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/payment_methods/pm_1FqJeSFk4eGpfLOCuvWvHB5X
  response:
    body:
      string: "{\n  \"id\": \"pm_1FqJeSFk4eGpfLOCuvWvHB5X\",\n  \"object\": \"payment_method\",\n
        \ \"billing_details\": {\n    \"address\": {\n      \"city\": null,\n      \"country\":
        null,\n      \"line1\": null,\n      \"line2\": null,\n      \"postal_code\":
        null,\n      \"state\": null\n    },\n    \"email\": null,\n    \"name\":
        null,\n    \"phone\": null\n  },\n  \"card\": {\n    \"brand\": \"visa\",\n
        \   \"checks\": {\n      \"address_line1_check\": null,\n      \"address_postal_code_check\":
        null,\n      \"cvc_check\": null\n    },\n    \"country\": \"US\",\n    \"exp_month\":
        12,\n    \"exp_year\": 2020,\n    \"fingerprint\": \"k6ycurEAdsI1uF3b\",\n
        \   \"funding\": \"credit\",\n    \"generated_from\": null,\n    \"last4\":
        \"4242\",\n    \"three_d_secure_usage\": {\n      \"supported\": true\n    },\n
        \   \"wallet\": null\n  },\n  \"created\": 1576503020,\n  \"customer\": \"cus_GN3mAK4BsO9CXh\",\n
        \ \"livemode\": false,\n  \"metadata\": {\n  },\n  \"type\": \"card\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '850'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:24 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_Kj3CdIJp3QPQ9s
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/payment_methods/pm_card_jp
  response:
    body:
      string: "{\n  \"id\": \"pm_1FqJeWFk4eGpfLOCKqFYQx35\",\n  \"object\": \"payment_method\",\n
        \ \"billing_details\": {\n    \"address\": {\n      \"city\": null,\n      \"country\":
        null,\n      \"line1\": null,\n      \"line2\": null,\n      \"postal_code\":
        null,\n      \"state\": null\n    },\n    \"email\": null,\n    \"name\":
        null,\n    \"phone\": null\n  },\n  \"card\": {\n    \"brand\": \"visa\",\n
        \   \"checks\": {\n      \"address_line1_check\": null,\n      \"address_postal_code_check\":
        null,\n      \"cvc_check\": null\n    },\n    \"country\": \"JP\",\n    \"exp_month\":
        12,\n    \"exp_year\": 2020,\n    \"fingerprint\": \"4heNPBHbDWXWyXBc\",\n
        \   \"funding\": \"credit\",\n    \"generated_from\": null,\n    \"last4\":
        \"0003\",\n    \"three_d_secure_usage\": {\n      \"supported\": true\n    },\n
        \   \"wallet\": null\n  },\n  \"created\": 1576503024,\n  \"customer\": null,\n
        \ \"livemode\": false,\n  \"metadata\": {\n  },\n  \"type\": \"card\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '834'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:24 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_rcDB6QbG8Fs20Q
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: email=donor%40example.com&payment_method=pm_1FqJeWFk4eGpfLOCKqFYQx35
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/customers
  response:
    body:
      string: "{\n  \"id\": \"cus_GN3m3YIwSdHoEp\",\n  \"object\": \"customer\",\n
        \ \"account_balance\": 0,\n  \"address\": null,\n  \"balance\": 0,\n  \"created\":
        1576503024,\n  \"currency\": null,\n  \"default_source\": null,\n  \"delinquent\":
        false,\n  \"description\": null,\n  \"discount\": null,\n  \"email\": \"donor@example.com\",\n
        \ \"invoice_prefix\": \"07007F8E\",\n  \"invoice_settings\": {\n    \"custom_fields\":
        null,\n    \"default_payment_method\": null,\n    \"footer\": null\n  },\n
        \ \"livemode\": false,\n  \"metadata\": {\n  },\n  \"name\": null,\n  \"phone\":
        null,\n  \"preferred_locales\": [\n\n  ],\n  \"shipping\": null,\n  \"sources\":
        {\n    \"object\": \"list\",\n    \"data\": [\n\n    ],\n    \"has_more\":
        false,\n    \"total_count\": 0,\n    \"url\": \"/v1/customers/cus_GN3m3YIwSdHoEp/sources\"\n
        \ },\n  \"subscriptions\": {\n    \"object\": \"list\",\n    \"data\": [\n\n
        \   ],\n    \"has_more\": false,\n    \"total_count\": 0,\n    \"url\": \"/v1/customers/cus_GN3m3YIwSdHoEp/subscriptions\"\n
        \ },\n  \"tax_exempt\": \"none\",\n  \"tax_ids\": {\n    \"object\": \"list\",\n
        \   \"data\": [\n\n    ],\n    \"has_more\": false,\n    \"total_count\":
        0,\n    \"url\": \"/v1/customers/cus_GN3m3YIwSdHoEp/tax_ids\"\n  },\n  \"tax_info\":
        null,\n  \"tax_info_verification\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1132'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:25 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - create_customer_for_participant_1360
      original-request:
      - req_nXk7KZjPMz53Nh
      request-id:
      - req_nXk7KZjPMz53Nh
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: amount=10000&confirm=True&currency=eur&customer=cus_GN3m3YIwSdHoEp&metadata[payin_id]=1360&payment_method=pm_1FqJeWFk4eGpfLOCKqFYQx35&return_url=http%3A%2F%2Flocalhost%2Fdonor%2Fgiving%2Fpay%2Fstripe%2F1360&statement_descriptor=Liberapay+1360
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/payment_intents
  response:
    body:
      string: "{\n  \"id\": \"pi_1FqJeXFk4eGpfLOCTyAo9T5n\",\n  \"object\": \"payment_intent\",\n
        \ \"amount\": 10000,\n  \"amount_capturable\": 0,\n  \"amount_received\":
        10000,\n  \"application\": null,\n  \"application_fee_amount\": null,\n  \"canceled_at\":
        null,\n  \"cancellation_reason\": null,\n  \"capture_method\": \"automatic\",\n
        \ \"charges\": {\n    \"object\": \"list\",\n    \"data\": [\n      {\n        \"id\":
        \"ch_1FqJeXFk4eGpfLOCSqjyzvJG\",\n        \"object\": \"charge\",\n        \"amount\":
        10000,\n        \"amount_refunded\": 0,\n        \"application\": null,\n
        \       \"application_fee\": null,\n        \"application_fee_amount\": null,\n
        \       \"balance_transaction\": \"txn_1FqJeXFk4eGpfLOCtPq6NCJV\",\n        \"billing_details\":
        {\n          \"address\": {\n            \"city\": null,\n            \"country\":
        null,\n            \"line1\": null,\n            \"line2\": null,\n            \"postal_code\":
        null,\n            \"state\": null\n          },\n          \"email\": null,\n
        \         \"name\": null,\n          \"phone\": null\n        },\n        \"captured\":
        true,\n        \"created\": 1576503025,\n        \"currency\": \"eur\",\n
        \       \"customer\": \"cus_GN3m3YIwSdHoEp\",\n        \"description\": null,\n
        \       \"destination\": null,\n        \"dispute\": null,\n        \"disputed\":
        false,\n        \"failure_code\": null,\n        \"failure_message\": null,\n
        \       \"fraud_details\": {\n        },\n        \"invoice\": null,\n        \"livemode\":
        false,\n        \"metadata\": {\n          \"payin_id\": \"1360\"\n        },\n
        \       \"on_behalf_of\": null,\n        \"order\": null,\n        \"outcome\":
        {\n          \"network_status\": \"approved_by_network\",\n          \"reason\":
        null,\n          \"risk_level\": \"normal\",\n          \"risk_score\": 50,\n
        \         \"seller_message\": \"Payment complete.\",\n          \"type\":
        \"authorized\"\n        },\n        \"paid\": true,\n        \"payment_intent\":
        \"pi_1FqJeXFk4eGpfLOCTyAo9T5n\",\n        \"payment_method\": \"pm_1FqJeWFk4eGpfLOCKqFYQx35\",\n
        \       \"payment_method_details\": {\n          \"card\": {\n            \"brand\":
        \"visa\",\n            \"checks\": {\n              \"address_line1_check\":
        null,\n              \"address_postal_code_check\": null,\n              \"cvc_check\":
        null\n            },\n            \"country\": \"JP\",\n            \"exp_month\":
        12,\n            \"exp_year\": 2020,\n            \"fingerprint\": \"4heNPBHbDWXWyXBc\",\n
        \           \"funding\": \"credit\",\n            \"installments\": null,\n
        \           \"last4\": \"0003\",\n            \"network\": \"visa\",\n            \"three_d_secure\":
        null,\n            \"wallet\": null\n          },\n          \"type\": \"card\"\n
        \       },\n        \"receipt_email\": null,\n        \"receipt_number\":
        null,\n        \"receipt_url\": \"https://pay.stripe.com/receipts/acct_1ChyayFk4eGpfLOC/ch_1FqJeXFk4eGpfLOCSqjyzvJG/rcpt_GN3mPDG4ZYoLELKCQZdGEgyjaZPUoG8\",\n
        \       \"refunded\": false,\n        \"refunds\": {\n          \"object\":
        \"list\",\n          \"data\": [\n\n          ],\n          \"has_more\":
        false,\n          \"total_count\": 0,\n          \"url\": \"/v1/charges/ch_1FqJeXFk4eGpfLOCSqjyzvJG/refunds\"\n
        \       },\n        \"review\": null,\n        \"shipping\": null,\n        \"source\":
        null,\n        \"source_transfer\": null,\n        \"statement_descriptor\":
        \"Liberapay 1360\",\n        \"statement_descriptor_suffix\": null,\n        \"status\":
        \"succeeded\",\n        \"transfer_data\": null,\n        \"transfer_group\":
        null\n      }\n    ],\n    \"has_more\": false,\n    \"total_count\": 1,\n
        \   \"url\": \"/v1/charges?payment_intent=pi_1FqJeXFk4eGpfLOCTyAo9T5n\"\n
        \ },\n  \"client_secret\": \"pi_1FqJeXFk4eGpfLOCTyAo9T5n_secret_fr6agPpCzL04wpnCrcxJQut4b\",\n
        \ \"confirmation_method\": \"automatic\",\n  \"created\": 1576503025,\n  \"currency\":
        \"eur\",\n  \"customer\": \"cus_GN3m3YIwSdHoEp\",\n  \"description\": null,\n
        \ \"invoice\": null,\n  \"last_payment_error\": null,\n  \"livemode\": false,\n
        \ \"metadata\": {\n    \"payin_id\": \"1360\"\n  },\n  \"next_action\": null,\n
        \ \"on_behalf_of\": null,\n  \"payment_method\": \"pm_1FqJeWFk4eGpfLOCKqFYQx35\",\n
        \ \"payment_method_options\": {\n    \"card\": {\n      \"installments\":
        null,\n      \"request_three_d_secure\": \"automatic\"\n    }\n  },\n  \"payment_method_types\":
        [\n    \"card\"\n  ],\n  \"receipt_email\": null,\n  \"review\": null,\n  \"setup_future_usage\":
        null,\n  \"shipping\": null,\n  \"source\": null,\n  \"statement_descriptor\":
        \"Liberapay 1360\",\n  \"statement_descriptor_suffix\": null,\n  \"status\":
        \"succeeded\",\n  \"transfer_data\": null,\n  \"transfer_group\": null\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '4231'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:26 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - payin_intent_1360
      original-request:
      - req_abAG0DoAVuNICY
      request-id:
      - req_abAG0DoAVuNICY
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers: {}
    method: GET
    uri: https://api.stripe.com/v1/balance_transactions/txn_1FqJeXFk4eGpfLOCtPq6NCJV
  response:
    body:
      string: "{\n  \"id\": \"txn_1FqJeXFk4eGpfLOCtPq6NCJV\",\n  \"object\": \"balance_transaction\",\n
        \ \"amount\": 10000,\n  \"available_on\": 1577059200,\n  \"created\": 1576503025,\n
        \ \"currency\": \"eur\",\n  \"description\": null,\n  \"exchange_rate\": null,\n
        \ \"fee\": 315,\n  \"fee_details\": [\n    {\n      \"amount\": 315,\n      \"application\":
        null,\n      \"currency\": \"eur\",\n      \"description\": \"Stripe processing
        fees\",\n      \"type\": \"stripe_fee\"\n    }\n  ],\n  \"net\": 9685,\n  \"source\":
        \"ch_1FqJeXFk4eGpfLOCSqjyzvJG\",\n  \"status\": \"pending\",\n  \"type\":
        \"charge\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '519'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:26 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      request-id:
      - req_lHEoCoxtMuw0la
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
- request:
    body: amount=4843&currency=EUR&destination=acct_1FqJeGGxJKe3V2vT&metadata[payin_transfer_id]=1360&source_transaction=ch_1FqJeXFk4eGpfLOCSqjyzvJG
    headers: {}
    method: POST
    uri: https://api.stripe.com/v1/transfers
  response:
    body:
      string: "{\n  \"id\": \"tr_1FqJeZFk4eGpfLOCzj0hx4ix\",\n  \"object\": \"transfer\",\n
        \ \"amount\": 4843,\n  \"amount_reversed\": 0,\n  \"balance_transaction\":
        \"txn_1FqJeZFk4eGpfLOCu32xEVKQ\",\n  \"created\": 1576503027,\n  \"currency\":
        \"eur\",\n  \"description\": null,\n  \"destination\": \"acct_1FqJeGGxJKe3V2vT\",\n
        \ \"destination_payment\": \"py_1FqJeZGxJKe3V2vTGLrmHpAb\",\n  \"livemode\":
        false,\n  \"metadata\": {\n    \"payin_transfer_id\": \"1360\"\n  },\n  \"reversals\":
        {\n    \"object\": \"list\",\n    \"data\": [\n\n    ],\n    \"has_more\":
        false,\n    \"total_count\": 0,\n    \"url\": \"/v1/transfers/tr_1FqJeZFk4eGpfLOCzj0hx4ix/reversals\"\n
        \ },\n  \"reversed\": false,\n  \"source_transaction\": \"ch_1FqJeXFk4eGpfLOCSqjyzvJG\",\n
        \ \"source_type\": \"card\",\n  \"transfer_group\": \"group_pi_1FqJeXFk4eGpfLOCTyAo9T5n\"\n}\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '740'
      Content-Type:
      - application/json
      Date:
      - Mon, 16 Dec 2019 13:30:27 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31556926; includeSubDomains; preload
      access-control-allow-credentials:
      - 'true'
      access-control-allow-methods:
      - GET, POST, HEAD, OPTIONS, DELETE
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      access-control-max-age:
      - '300'
      cache-control:
      - no-cache, no-store
      idempotency-key:
      - payin_transfer_1360
      original-request:
      - req_IC3eZGF5mhMHgU
      request-id:
      - req_IC3eZGF5mhMHgU
      stripe-should-retry:
      - 'false'
      stripe-version:
      - '2019-08-14'
    status:
      code: 200
      message: OK
version: 1
