from aspen import Response
from liberapay.models.participant import NonexistingElsewhere
[-----------------------------------------------------------------------------]
if user.ANON:
    raise Response(403)
request.allow("POST")

platform = request.body["platform"]
user_id = request.body["user_id"]

try:
    user.delete_elsewhere(platform, user_id)
except NonexistingElsewhere:
    raise Response(400, _("Account does not exist."))

[---] application/json via json_dump
{ "msg": "OK" }
